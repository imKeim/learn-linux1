## Цели

После завершения этого раздела вы сможете найти, установить и обновить программные пакеты с помощью команды `apt`.

## Менеджер пакетов APT

Настоящим пакетным менеджером в Debain-based дистрибутивах (и не только, например, в AltLinux) является **APT** (Advanced Package Tool, Улучшенный инструмент для работы с пакетами), который умеет работать с репозиториями, разрешать зависимости и взаимодействовать с dpkg, которая, собственно, и занимается установкой пакетов.

APT имеет два интерфейса командной строки: `apt-get` и более новый `apt`. Их синтаксис и возможности во многом схожи

Как уже говорилось ранее, пакеты размещаются в репозиториях.

Списки репозиториев в дистрибутивах с APT хранятся в **/etc/apt/sources.list**, но они не содержат сведений о пакетах. Чтобы их получить нужно скачать из репозитория список находящихся в нем пакетов. Каждый раз скачивать списки - плохая идея, поэтому APT хранит локальный кеш пакетов в **/var/lib/apt/lists**, также копии всех скачанных пакетов сохраняются в **/var/cache/apt/archives**, что позволяет предотвратить их скачивание в случае повторной установки.

APT всегда работает с локальным кешем списков, поэтому перед любыми действиями с пакетным менеджером следует обновить списки в кеше:

```bash
# apt update
```

Установить обновления можно командой:

```bash
# apt upgrade
```

Это безопасный способ обновления, при котором обновляются только установленные пакеты и не происходит установки новых пакетов, если они затрагивают текущие версии, также не удаляются убранные из репозитория пакеты. Если же вы хотите установить самые последние версии пакетов, то следует воспользоваться иной командой:

```bash
# apt dist-upgrade
```

Обычные обновления следует выполнять командой upgrade, тогда как dist-upgrade следует использовать для обновления дистрибутива, в том числе и на минорные версии в составе текущего выпуска.

Для установки пакетов следует использовать команду:

```bash
# apt install <package>
```

Если нужно установить несколько пакетов, то их следует перечислить через пробел. Система проанализирует изменения и либо выполнит установку, либо попросит дополнительного подтверждения, особенно если нужно установить большое количество новых пакетов по зависимостям

Для удаления пакета используйте:

```bash
# apt remove <package>
```

Это удалит сам пакет, но оставит его конфигурационные файлы (если они были изменены) и прочие данные. Для полного удаления пакета со всеми его данными используйте другую команду:

```bash
# apt purge <package>
```

Дополнительно остановимся на таком виде пакетов, как пакеты установленные автоматически. Это пакеты, которые были установлены по зависимостям иных пакетов и после удаления или обновления последних могут более никем не использоваться. APT отслеживает такие пакеты и сообщает о них пользователю

Удалить их можно командой:

```bash
# apt autoremove
```

Если вы не знаете точного названия нужного вам пакета, то можно выполнить его поиск командой:

```bash
# apt search <pattern>
```

При этом поиск производится не только по имени пакета, но и по его описанию

## Некоторые особенности использования apt-get

В некоторых дистрибутивах менеджер APT представлен только утилитой `apt-get` (например, Альт Linux и старые версии Debian/Ubuntu). Эта утилита имеет несколько отличий от `apt`.

Для поиска необходимо воспользоваться командой:

```bash
# apt-cache search <package>
```
