## Цели

После завершения этого раздела вы сможете находить информацию на страницах локального руководства по системе Linux.

## Знакомство с командой man

Одним из источников документации, который обычно доступен в локальной системе, являются страницы руководства по системе, или man-страницы. Эти страницы поставляются в составе соответствующих программных пакетов и доступны из командной строки с помощью команды man.
Использовавшееся ранее руководство программиста Linux (Linux Programmer's Manual), из которого появились man-страницы, представляло собой достаточно большой документ, который мог бы занять множество печатных страниц. В каждом разделе содержится информация по определенной теме.

**Таблица 4.1.1.** Общие разделы руководства по Linux

| Раздел | Тип содержимого |
| --- | --- |
| 1   | Пользовательские команды _(исполняемые_ _файлы_ _и_ _команды_ _командной_ _оболочки)_ |
| 2   | Системные вызовы _(процедуры_ _ядра,_ _вызываемые_ _из_ _пользовательского_ _пространства)_ |
| 3   | Библиотечные функции _(предоставляются_ _библиотеками_ _программ)_ |
| 4   | Специальные файлы _(например,_ _файлы_ _устройств)_ |
| 5   | Форматы файлов _(различные_ _структуры_ _и_ _файлы_ _конфигурации)_ |
| 6   | Игры _(в_ _прошлом_ _раздел_ _для_ _развлекательных_ _программ)_ |
| 7   | Соглашения, стандарты и прочее _(протоколы,_ _файловые_ _системы)_ |
| 8   | Администрирование системы и привилегированные команды _(задачи_ _сопровождения)_ |
| 9   | API ядра Linux _(внутренние_ _вызовы_ _ядра)_ |


Чтобы различить идентичные названия тем в разных разделах, man-страница указывается с номером раздела в круглых скобках после темы. Например, passwd(1) описывает команду для изменения пароля, а passwd(5) описывает формат файла /etc/passwd для сохранения локальных учетных записей пользователей.

Для чтения определенных man-страниц используйте команду man topic. Текст отображается поэкранно. Команда man ищет разделы руководства в алфавитно-цифровом порядке. Например, man passwd по умолчанию отображает passwd(1). Чтобы отобразить тему man-страницы из определенного раздела, укажите номер раздела в качестве аргумента: man 5 passwd отображает passwd(5).

## Навигация по man-страницам и поиск

Возможность быстрого поиска тем и навигации по man-страницам является важным навыком администрирования. Инструменты графического пользовательского интерфейса облегчают настройку общих системных ресурсов, но использование интерфейса командной строки еще эффективнее. Чтобы эффективно перемещаться по командной строке, необходимо уметь находить необходимую информацию на man-страницах.

В следующей таблице приведены основные команды навигации по man-страницам.

**Таблица 4.1.2.** Навигация по man-страницам

| Команда | Результат |
| --- | --- |
| **Пробел** | Прокрутка вперед (вниз) на один экран |
| **Страница** **вниз** | Прокрутка вперед (вниз) на один экран |
| **Страница** **вверх** | Прокрутка назад (вверх) на один экран |
| **Стрелка** **вниз** | Прокрутка вперед (вниз) на одну строку |
| **Стрелка** **верх** | Прокрутка назад (вверх) на одну строку |
| **D** | Прокрутка вперед (вниз) на половину экрана |
| **U** | Прокрутка назад (вверх) на половину экрана |
| **/**_строка_ | Поиск _строки_ вперед (вниз) на man-странице |
| **N** | Повтор предыдущего поиска вперед (вниз) на man-странице |
| **Shift**+**N** | Повтор предыдущего поиска назад (вверх) на man-странице |
| **G** | Переход в начало man-страницы |
| **Shift**+**G** | Переход в конец man-страницы |
| **Q** | Выход из **man** и возврат к командной оболочке |

<details>
<summary>Важно</summary>

При выполнении поиска строка может включать регулярные выражения. В отличие от простого текста (например, passwd), который вводится как обычно, в регулярных выражениях используются метасимволы (например, $, *, . и ^) для более сложного поиска. Таким образом, если строка включает программные метасимволы, такие как make $$$, поиск может привести к непредвиденным результатам.

</details>

## Чтение man-страниц

Каждая тема разделена на несколько частей. Большинство тем имеют одинаковые заголовки и представлены в одинаковом порядке. Обычно тема содержит не все заголовки, поскольку некоторые заголовки неприменимы к некоторым темам.

Далее приведены общие заголовки.

**Таблица 4.1.3.** Заголовки

| Заголовок | Описание |
| --- | --- |
| NAME | Название темы. Обычно имя команды или файла. Очень краткое описание. |
| SYNOPSIS | Краткое содержание синтаксиса команды. |
| DESCRIPTION | Подробное описание, раскрывающее суть темы. |
| OPTIONS | Описание опций команд. |
| EXAMPLES | Примеры использования команды, функции или файла. |
| FILES | Список файлов и каталогов, связанных с man-страницей. |
| SEE ALSO | Связанная информация, обычно другие man-темы. |
| BUGS | Известные ошибки в программном обеспечении. |
| AUTHOR | Информация о том, кто участвовал в создании темы. |


## Поиск man-страниц по ключевым словам

Поиск man-страниц по ключевым словам осуществляется с помощью команды `man -k keyword`. Она отображает список man-тем, совпадающих с ключевыми словами, вместе с номерами разделов.

```shell
[student@desktopX ~]$ man -k passwd
checkPasswdAccess (3) - query the SELinux policy database in the kernel.
chpasswd (8)          - update passwords in batch mode
ckpasswd (8)          - nnrpd password authenticator
fgetpwent_r (3)       - get passwd file entry reentrantly
getpwent_r (3)        - get passwd file entry reentrantly
...
passwd (1)            - update user's authentication tokens
sslpasswd (1ssl)      - compute password hashes
passwd (5)            - password file
passwd.nntp (5)       - Passwords for connecting to remote NNTP servers
passwd2des (3)        - RFS password encryption
...
```

Популярные темы по системному администрированию находятся в разделах 1 (пользовательские команды), 5 (форматы файлов) и 8 (команды администрирования). Администраторы, использующие специальные диагностические утилиты, также пользуются разделом 2 (системные вызовы). Остальные разделы в основном нужны программистам для справки или расширенного администрирования.

<details>
<summary>Примечание</summary>

Поиск по ключевым словам выполняется по индексу, сформированному командой mandb(8), которая должна выполняться от имени пользователя root. Эта команда запускается ежедневно с помощью cron.daily или anacrontab в течение часа после загрузки, если данные неактуальны.
</details>


<details>
<summary>Важно</summary>

Опция `-K` (в верхнем регистре) команды `man` выполняет полнотекстовый поиск страниц, а не просто по заголовкам и описаниям, как опция `-k`. Полнотекстовый поиск использует больше системных ресурсов и занимает больше времени.
</details>